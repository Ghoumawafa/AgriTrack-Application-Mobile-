{
  "rules": {
    "irrigation": {
      "zones": {
        "$zoneId": {
          ".read": "auth != null",
          ".write": "auth != null",
          ".validate": "newData.hasChildren(['mode', 'manualState', 'hardware'])",
          "mode": {
            ".validate": "newData.isString() && (newData.val() == 'manual' || newData.val() == 'auto' || newData.val() == 'scheduled')"
          },
          "manualState": {
            ".validate": "newData.isBoolean()"
          },
          "sensorValue": {
            ".validate": "newData.isNumber()"
          },
          "hardware": {
            ".validate": "newData.hasChildren(['pumpMotor'])",
            "pumpMotor": {
              ".validate": "newData.hasChildren(['pin', 'enabled'])",
              "pin": {
                ".validate": "newData.isNumber() && newData.val() >= 0 && newData.val() <= 40"
              },
              "enabled": {
                ".validate": "newData.isBoolean()"
              }
            },
            "soilSensor": {
              "pin": {
                ".validate": "newData.isNumber() && newData.val() >= 0 && newData.val() <= 40"
              },
              "enabled": {
                ".validate": "newData.isBoolean()"
              }
            }
          }
        }
      }
    }
  }
}

